<!DOCTYPE html>
<html lang="en">
<head>
<title>Quotify</title>
<script src="js/react.development.js"></script>
<script src="js/react-dom.development.js"></script>
<script src="js/babel.js"></script>
</head>
<body>
<div id="app"></div>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>

<script type="text/babel">
    const appHandle = document.getElementById('app');
    let i = 0;

    function Heading(props){
        return <h1>{props.title}</h1>
    }

    class Quotes extends React.Component {
        constructor(props){
            super(props);
            this.state = {
                quotes : {}
            }
            this.getData = this.getData.bind(this)
            this.getQuote = this.getQuote.bind(this)
        }
        

    componentDidMount() {
        this.getData();
    }
    getData(){
        //console.log(JSON.parse(localStorage.getItem("key")));
        let data = JSON.parse(localStorage.getItem("key"))
        this.setState({
            quotes : data[Math.floor(Math.random()*data.length)]
        })
    }

    getQuote(){
        this.getData();
    }

    render(){
        return (
            <div>
                <p><a href="./index.html">Random Quote(api)</a> | <a href="#">Random Quote(local)</a> | <a href="./add-quote.html">Add Quote</a> | <a href="./list-quotes.html">List All Quotes(local)</a></p>
                <h2>{this.state.quotes.quote} -- {this.state.quotes.author}</h2>
                <button onClick={this.getQuote}>Generate new quote</button>
            </div>
        )
    }
}

    function App(){
        return (
            <div>
                <Heading title="Quotify" />
                <Quotes />
            </div>
        )
    }

    ReactDOM.render(<App />,appHandle);
</script>
</body>
</html>
